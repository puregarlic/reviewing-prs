import { Invert } from 'mdx-deck/layouts'
import { Head, Appear, Notes, Image } from 'mdx-deck'
import { CodeSurfer } from 'mdx-deck-code-surfer'

import { SplitCentered, SplitWithTitle } from './layouts'

export { default as theme } from './theme'

<Head>
  <title>Reviewing Pull Requests</title>
</Head>

# Reviewing PRs

#### [Graham Barber](https://github.com/puregarlic)

```notes
- PRs are like checkpoints
  - Keep unwanted problems out
  - Easy when reviewers are blind
  - Frustration or indifference
```

---

<Image src="https://media.giphy.com/media/R459x856IfF6w/giphy.gif" />

```notes
> Probably you, doing your first PR review
```

---

export default Invert

# Agenda

- Objectives
- What to look for
- CASS's recommended process

```notes
Applies to GitHub, GitLab, and Bitbucket

Mainly applies to feat and fix PRs, but always keep them in mind
```

---

## Objectives

<ul>
  <Appear>
    <li>Ensure functionality</li>
    <li>Maintain readable code</li>
    <li>Prevent technical debt</li>
    <li>Learn something new</li>
  </Appear>
</ul>

---

## Ensure Functionality

```notes
- Bare minimum
- Tests help to a point
- Above all, **run it**

## Don't introduce broken code

- Prevents rushed-fixes further down the line

- Essential part of Continuous Integration
```

---

## Maintain Readable Code

```notes
- If you don't know what it does, the next person
  probably won't either
- Don't let the writer sit next to you
- Use a formatter

## If you don't understand the code, it will bite

- Documentation is a multivitamin, not a pain reliever
```

---

## Prevent Technical Debt

```notes
- Refactoring *now* is good *late*
- What's done now is not rushed later
- Not everybody knows best or alternative
  practices
- Ask someone else!
- Use a linter

## Don't let anyone take the easy way out

- Never be afraid to request changes
```

---

## Learn Something New

```notes
- Exposure to diversity is important
  - People solve problems differently
  - People know things that you don't
- Talk with the code writer _after_ looking
  over everything
- Do some research if you need it
  - Ask an expert

> Do your best to make sure you or the writer
  learns something new

- Helps you grow as a developer
```

---

import ultramin from 'prism-react-renderer/themes/ultramin'

<CodeSurfer
  title="Things to Look For"
  code={require("!raw-loader!./sample.js")}
  theme={ultramin}
  lang="javascript"
  showNumbers={false}
  dark={false}
  steps={[
    { tokens: {12: [4, 5, 6, 7, 8, 9], 1: [0], 2: [0, 1]}, notes: 'Use of outdated language features' },
    {
      tokens: {
        1: [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
        2: [5, 6, 7, 8, 9]
      },
      notes: 'Not taking advantage of language features'
    },
    { range: [4, 7], notes: 'Repetition where iteration should be used'},
    { tokens: {1: [1], 2: [2], 9: [2], 10: [2]}, notes: 'Inconsistent naming conventions' },
    { tokens: {9: [2], 12: [7]}, notes: 'Misspelled variable names' },
    { tokens: {10: [5]}, notes: 'Misspelled strings'},
    { lines: [12], notes: 'Logging debug messages to the console'},
    { range: [14, 18], notes: 'Unhandled branching logic'},
    { range: [20, 24], notes: 'Nested ternaries'}
  ]}
/>

```notes
I've prepared this nasty demo code

... After walking through...

- You might not know that these things are bad
  - That's okay!
- You might not know what to suggest instead
  - Ask someone!
  - Research!

> Learn something new
```

---

export default SplitWithTitle

## Questions You Should Ask

<div>

### Yourself

<ol>
  <Appear>
    <li>How does this compare to what I would do?</li>
    <li>Do I understand what this code is doing?</li>
    <li>Is this code relatively future-proof?</li>
  </Appear>
</ol>

</div>


<div>

### Writer

<ol>
  <Appear>
    <li>Why did you implement ______ this way?</li>
    <li>Do you think someone could modify your code without you explaining it?</li>
    <li>What would you improve about your implementation?</li>
  </Appear>
</ol>

</div>

```notes
Writer questions are for _after_ reading through changes

1. Analyze the implementation
2. Is the code understandable to outsiders?
3. Will it need to be edited in time?
```

---

## Our Process

1. **Read through the code**
2. Verify that tests were written and are passing
3. Verify that documentation was written
4. _Run the code locally_
5. **Approve or request changes**
6. **Discuss with the code writer**

```notes
- What we've discussed happens in the bolded
  steps

- Running the code is time-consuming, but 
  necessary

- Steps 2 and 3 are trivial

> The process requires thought and
  consideration

- When you approve, try to leave a positive
  message about what they've done
```

---

## Objectives

- Ensure functionality
- Maintain readable code
- Prevent technical debt
- Learn something new

```notes
Summarize
```

---

# Questions

```notes
Hit me with your questions
```

---

## Resources

- [GitHub repository](https://github.com/puregarlic/reviewing-prs)
- [CASS website](http://cass.oregonstate.edu)

#### Recommended reading

- [How to code review in a Pull Request](https://www.codacy.com/blog/how-to-code-review-in-a-pull-request/)